(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6558:function(e,t,s){Promise.resolve().then(s.bind(s,8212))},8212:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),n=s(2265),c=s(8472),o=s(1270),l=s(6463),r=s(6377);function i(){let e=(0,l.useRouter)(),[t,s]=(0,n.useState)([]),{authState:i}=(0,n.useContext)(o.V);console.log(i);let u=()=>{c.Z.get("http://localhost:3001/posts").then(e=>{s(e.data),console.log("here is the data",e.data)})};function d(e,s){let a=t.find(t=>t.id===e);return!!a&&a.Likes.some(e=>e.UserId===s)}(0,n.useEffect)(()=>{u()},[]),console.log(d(1,3)),console.log(d(2,3));let h=e=>{c.Z.post("http://localhost:3001/likes",{PostId:e},{headers:{accessToken:localStorage.getItem("accessToken")}}).then(e=>{u()})};return console.log("authenticated?",i.status),(0,a.jsx)("div",{className:"App",children:t.slice().reverse().map(t=>(0,a.jsxs)("div",{className:"post",children:[(0,a.jsx)("h3",{className:"title",children:t.title}),(0,a.jsx)("div",{className:"body px-4",onClick:()=>e.push("".concat("/".concat(t.id))),children:t.postText}),(0,a.jsxs)("div",{className:"footer  justify-between px-5 items-center py-2",children:[(0,a.jsx)("div",{children:t.username}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r.Z,{className:" ".concat(d(t.id,i.id)?"text-gray-500":"text-gray-300"," "),onClick:()=>{h(t.id)}}),(0,a.jsx)("label",{children:t.Likes.length})]})]})]},t.id))})}},1270:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return r},V:function(){return l}});var a=s(7437),n=s(2265),c=s(8472);let o={username:"",id:0,status:!1},l=(0,n.createContext)({authState:o,setAuthState:()=>{}}),r=e=>{let{children:t}=e,[s,r]=(0,n.useState)(o);return(0,n.useEffect)(()=>{c.Z.get("http://localhost:3001/auth/auth",{headers:{accessToken:localStorage.getItem("accessToken")}}).then(e=>{e.data.error?r(e=>({...e,status:!1})):r({username:e.data.username,id:e.data.id,status:!0})})},[]),(0,a.jsx)(l.Provider,{value:{authState:s,setAuthState:r},children:t})}}},function(e){e.O(0,[472,19,971,23,744],function(){return e(e.s=6558)}),_N_E=e.O()}]);