(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{466:function(e,t,s){Promise.resolve().then(s.bind(s,875))},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},875:function(e,t,s){"use strict";s.r(t);var a=s(7437),n=s(2265),o=s(8472),r=s(1270),c=s(6463);t.default=e=>{let{params:t}=e,s=(0,c.useRouter)(),{authState:l,setAuthState:d}=(0,n.useContext)(r.V),[i,u]=(0,n.useState)({title:"",postText:"",username:"",id:""}),[h,m]=(0,n.useState)([]),[x,f]=(0,n.useState)(""),{id:p}=t,g=e=>{o.Z.delete("http://localhost:3001/comments/".concat(e),{headers:{accessToken:localStorage.getItem("accessToken")}}).then(()=>{m(h.filter(t=>t.id!=e))})},v=e=>{o.Z.delete("http://localhost:3001/posts/".concat(e),{headers:{accessToken:localStorage.getItem("accessToken")}}).then(()=>{s.push("/")})};return(0,n.useEffect)(()=>{let e=async()=>{try{let e=await o.Z.get("http://localhost:3001/comments/".concat(p));m(e.data),console.log("This is the data:",e.data)}catch(e){console.error("Error fetching data:",e)}};(async()=>{try{let e=await o.Z.get("http://localhost:3001/posts/byId/".concat(p));u(e.data),console.log("This is the data:",e.data)}catch(e){console.error("Error fetching data:",e)}})(),e()},[p]),(0,a.jsxs)("div",{className:"postPage",children:[(0,a.jsx)("div",{className:"leftSide",children:(0,a.jsx)("div",{className:"post ",id:"individual",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"title",children:[" ",i.title," "]}),(0,a.jsx)("div",{className:"body px-5",children:i.postText}),(0,a.jsxs)("div",{className:"footer py-2",children:[i.username,l.username===i.username&&(0,a.jsxs)("button",{onClick:()=>{v(i.id)},children:[" ","Delete Post"]})]})]}):(0,a.jsx)("div",{children:"Loading..."})})}),(0,a.jsxs)("div",{className:"rightSide",children:[(0,a.jsxs)("div",{className:"addCommentContainer",children:[(0,a.jsx)("input",{className:"px-2",type:"text",placeholder:"Comment...",autoComplete:"off",value:x,onChange:e=>{f(e.target.value)}}),(0,a.jsx)("button",{onClick:()=>{o.Z.post("http://localhost:3001/comments",{commentBody:x,PostId:p},{headers:{accessToken:localStorage.getItem("accessToken")}}).then(e=>{e.data.error?(alert(e.data.error),console.log(e.data.error)):(m([...h,{commentBody:x,username:e.data.username,id:e.data.id}]),f(""))})},children:" Add Comment"})]}),(0,a.jsx)("div",{className:"listOfComments",children:h.map((e,t)=>(0,a.jsxs)("div",{className:"comment flex flex-col ",children:[(0,a.jsx)("div",{className:"text-gray-500",children:e.username}),(0,a.jsxs)("div",{className:"flex gap-3 items-center justify-between font-semibold text-gray-800",children:[(0,a.jsx)("div",{children:e.commentBody}),l.username===e.username&&(0,a.jsx)("div",{onClick:()=>g(e.id),className:"border  border-gray-400 rounded-full inline-block text-gray-600   px-2 cursor-pointer",children:"X"})]})]},t))})]})]})}},1270:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return l},V:function(){return c}});var a=s(7437),n=s(2265),o=s(8472);let r={username:"",id:0,status:!1},c=(0,n.createContext)({authState:r,setAuthState:()=>{}}),l=e=>{let{children:t}=e,[s,l]=(0,n.useState)(r);return(0,n.useEffect)(()=>{o.Z.get("http://localhost:3001/auth/auth",{headers:{accessToken:localStorage.getItem("accessToken")}}).then(e=>{e.data.error?l(e=>({...e,status:!1})):l({username:e.data.username,id:e.data.id,status:!0})})},[]),(0,a.jsx)(c.Provider,{value:{authState:s,setAuthState:l},children:t})}}},function(e){e.O(0,[472,971,23,744],function(){return e(e.s=466)}),_N_E=e.O()}]);