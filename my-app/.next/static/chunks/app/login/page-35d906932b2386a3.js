(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{6182:function(e,t,s){Promise.resolve().then(s.bind(s,1193))},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},1193:function(e,t,s){"use strict";s.r(t);var a=s(7437),n=s(2265),u=s(8472),r=s(6463),o=s(1270);t.default=function(){let[e,t]=(0,n.useState)(""),[s,c]=(0,n.useState)(""),[l,i]=(0,n.useState)(""),{authState:d,setAuthState:h}=(0,n.useContext)(o.V),m=(0,r.useRouter)(),f=async()=>{try{await u.Z.post("http://localhost:3001/auth/login",{username:e,password:s}).then(e=>{console.log("Login successful:",e.data.user),localStorage.setItem("accessToken",e.data.token),h({username:e.data.username,id:e.data.id,status:!0}),console.log(d.username)}),m.push("/"),i("")}catch(e){console.log(e),alert("WRONG USER")}};return(0,a.jsxs)("div",{className:"loginContainer",children:[(0,a.jsx)("h2",{className:"mb-10 font-semibold",children:"Login to Create Posts"}),(0,a.jsx)("label",{children:"Username:"}),(0,a.jsx)("input",{className:"px-3",type:"text",value:e,onChange:e=>{t(e.target.value)}}),(0,a.jsx)("label",{children:"Password:"}),(0,a.jsx)("input",{className:"px-3",type:"password",value:s,onChange:e=>{c(e.target.value)}}),(0,a.jsx)("button",{onClick:f,children:"Login"}),l&&(0,a.jsx)("div",{className:"errorMessage",children:l})]})}},1270:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return c},V:function(){return o}});var a=s(7437),n=s(2265),u=s(8472);let r={username:"",id:0,status:!1},o=(0,n.createContext)({authState:r,setAuthState:()=>{}}),c=e=>{let{children:t}=e,[s,c]=(0,n.useState)(r);return(0,n.useEffect)(()=>{u.Z.get("http://localhost:3001/auth/auth",{headers:{accessToken:localStorage.getItem("accessToken")}}).then(e=>{e.data.error?c(e=>({...e,status:!1})):c({username:e.data.username,id:e.data.id,status:!0})})},[]),(0,a.jsx)(o.Provider,{value:{authState:s,setAuthState:c},children:t})}}},function(e){e.O(0,[472,971,23,744],function(){return e(e.s=6182)}),_N_E=e.O()}]);